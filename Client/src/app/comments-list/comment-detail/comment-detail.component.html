<div *ngIf="!isLoading && (rootComment || comment)" class="comment-container">
  <div class="comment p-2 mb-2">
    <div class="d-flex justify-content-between align-items-center w-100">
      <div class="fw-bold p-2 comment-header">
        {{ (rootComment || comment)?.userName }} ãƒ»
        <span class="text-muted small">{{
          (rootComment || comment)?.createdAt
        }}</span>
      </div>
    </div>
    <div class="mt-2 border-start border-secondary ps-3 comment-body">
      <div class="d-flex position-relative">
        <div class="position-absolute"></div>
        <p>{{ (rootComment || comment)?.text }}</p>
      </div>
      <div *ngIf="(rootComment || comment)?.imgLink">
        <div class="d-flex position-relative">
          <div class="position-absolute"></div>
          <img
            [src]="'http://localhost:3200/' + (rootComment || comment)?.imgLink"
            alt="Comment image"
            class="comment-image rounded mb-2 cursor-pointer"
            (click)="
              openImage(
                'http://localhost:3200/' + (rootComment || comment)?.imgLink
              )
            "
          />
        </div>
      </div>
    </div>

    <div *ngIf="(rootComment || comment)?.homePage" class="comment-homepage">
      <div class="d-flex position-relative">
        <div class="position-absolute"></div>
        <p>
          <a [href]="(rootComment || comment)?.homePage" target="_blank">{{
            (rootComment || comment)?.homePage
          }}</a>
        </p>
      </div>
    </div>

    <div class="mt-2 comment-footer">
      <button
        class="btn btn-orange"
        (click)="addReplyToComment((rootComment || comment)?.id!)"
      >
        Reply
      </button>
    </div>
  </div>

  <div
    *ngIf="(rootComment || comment)?.replies?.length > 0"
    class="ms-3 ps-2 replies"
  >
    <ng-container *ngFor="let reply of (rootComment || comment)?.replies">
      <div class="d-flex align-items-start position-relative w-100">
        <div class="position-absolute"></div>
        <app-comment-detail
          [comment]="reply"
          style="width: 100%"
        ></app-comment-detail>
      </div>
    </ng-container>
  </div>
</div>
